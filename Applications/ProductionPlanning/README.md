# 1. StampingWorkshop

## 运行示例程序
### 生成数据
    ``` sh
    $python3 OpenAPS/DataSets/Example/StampingDataBase.py
    ```
    生成基础数据文件 OpenAPS/DataSets/Example/stamping_workshop.db

### 生成计划
    ```
    $python3 OpenAPS/Applications/ProductionPlanning/StampingWorkshop.py
    ```

## 1.1 场景描述
    模拟冲压场景，规划主生产计划
    面向库存生产

## 1.2 问题描述

### 1.2.1 输入
#### 1.2.1.1 生产日历
    在模型层中，生产日历采用相对时间表示
#### 1.2.1.2 产能信息
#### 1.2.1.3 需求信息
#### 1.2.1.4 约束条件
#### 1.2.1.5 优化目标
#### 1.2.1.6 当前计划[可选]
    滚动计划时，需要根据当前计划的执行情况进行产能分配
#### 1.2.1.7 出库计划[可选]
    面向库存的生产计划，需要考虑库存容量是否足够
#### 1.2.1.8 来料计划[可选]
    来料计划与物料库存用于齐套分析

### 1.2.2 输出
    一系列: [时间区间, 产线/工作中心，加工什么，加工数量]

## 1.3 功能描述

### 1.3.1 自定义生产日历
    如设备维护等

### 1.3.2 自定义生产班制
    + 不同的工厂或车间都有各自的生产班制，常见的生产班制有
      - 单班制
      - 双班制
      - 三班制
      - 长短双班制
    + 工厂或车间周期性调整生产班制
    + 甚至有些工厂或车间需要根据需求以及供应链情况动态调整生产班制

### 1.3.3 并行加工与出件率
    两者都是用于描述: 一个工作中心的一次加工对应的产出情况
    以热处理工艺为例，
    1. 并行加工表示可同时进行热处理的几种不同的工件
    2. 出件率则表示一次热处理过程，可同时处理的每种工件的数量

    一个加工过程可以描述为: Dict {A: n1,  B: n2, C: n3, ...}
    其中keys表示并行加工的所有工件, values表示这个加工中各工件的出件率
#### 1.3.3.1 加工次数与产出量
    出件率指的是一个设备一次加工可完成某个工件类型的数量, 如并行加工 {A: 2, B: 2, C: 1}，
    那么加工N次的产出量为 {A: 2N, B: 2N, C: N}

#### 1.3.3.2 部分加工
    并行加工的特殊情形, 如并行加工 {A: 2, B: 2, C: 1}, 那么假设加工100次，产出结果为
    {A: 200, B: 200, C: 100}。假如由于加工惨次品或者备件计划导致A,B,C需求的比例不是2:2:1,
    此时就需要进行部分生产.
    
#### 1.3.3.3 并行加工与加工时长/生产节拍
    如并行加工 {A: 2, B: 2, C: 1}，那么A,B,C的加工时长/生产节拍必须保持一致. 实际运算中如果并行加工的加工时长/生产节拍不一致，会导致排产异常

### 1.3.4 完工时间
    完工时间通常是基于交付时间进行一个前向偏移，交付时间转换为完工时间需要单独处理

### 1.3.5 批量下限
#### 1.3.5.1 一个批次的最少加工时长
#### 1.3.5.2 一个批次的最少加工数量

### 1.3.6 批量上限
#### 1.3.6.1 一个批次的最大加工时长
#### 1.3.6.2 一个批次的最大加工数量

### 1.3.7 整批量条件
    如: 原材料整包，容器容量

### 1.3.8 OEE设置

### 1.3.9 滚动计划
    基于待完成计划、生产波动、需求波动、供应链波动、产能情况，生成新的计划

### 1.3.10 安全库存

### 1.3.11 库存容量

### 1.3.12 齐套分析
    根据库存情况以及来料计划生成可行的生产计划, 避免因原材料不足而导致生产等待

### 1.3.13 增删改单
    紧急插单

    订单替换

### 1.3.14 组合包含
#### 1.3.14.1 一个连续的时间区间上的组合包含

### 1.3.15 瓶颈资源
    工装夹具

### 1.3.16 产能选择

## 1.4 结果分析
### 1.4.1 产能不足
    可进行产能规划，调整产能后再进行排产
### 1.4.2 并行加工的数量不匹配
    如果并行加工的数量不匹配，会导致产能充足的情况下欠产，需要调整需求(输入)
### 1.4.3 负荷分析
